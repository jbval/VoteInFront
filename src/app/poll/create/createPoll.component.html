<form #f="ngForm" (ngSubmit)="onSubmit(f)" novalidate>
  <div class="row">
    <div class="col s12">
      <div class="card blue-grey darken-1">
        <div class="card-content white-text">
          <span class="card-title">Création de scrutin</span>
          <div class="row">
              <div class="col s12 m6">
                  <div class="card">
                    <div class="card-content black-text">
                      <span class="card-title">Informations générales</span>
                        <div class="switch">
                          <label>
                            privé
                            <input type="checkbox">
                            <span class="lever"></span>
                            public
                          </label>
                        </div>
                        <div class="input-field">
                          <input id="poll-title-text" type="text" class="datepicker" 
                          [(ngModel)]="title" name="poll-title-text">
                          <label for="poll-title-text">Titre du scrutin</label>
                        </div>
                        <div class="input-field">
                          <input id="poll-close-datepicker" type="date" class="datepicker" materialize="pickadate" 
                          [(ngModel)]="dateCloture" name="poll-close-datepicker">
                          <label for="poll-close-datepicker">Date de cloture du scrutin</label>
                        </div>
                        <div class="input-field">
                          <textarea id="description-textarea" class="materialize-textarea"
                          [(ngModel)]="description" name="description-textarea"></textarea>
                          <label for="description-textarea" >Description du scrutin</label>
                        </div>
                    </div>
                  </div>
                </div>
                <div class="col s12 m6">
                  <div class="card">
                    <div class="card-content black-text">
                      <div class="valign-wrapper">
                        <span class="card-title">Propositions</span>
                      </div>
                        <ul class="collapsible" data-collapsible="accordion">
                          <li *ngFor = "let proposition of propositions; let i = index;">
                            <div class="collapsible-header">
                                {{proposition.Name == "" ? "Vide" : proposition.Name}}
                            </div>
                            <div class="collapsible-body center-align">
                              <div class="row">
                                <div class="input-field">
                                  <input id="proposition-name-{{i}}-input" type="text" 
                                  [(ngModel)]="proposition.Name" name="proposition-name-{{i}}-input">
                                  <label for="proposition-name-{{i}}-input" >Nom de la proposition</label>
                                </div>
                                <div class="input-field">
                                  <textarea id="proposition-description-{{i}}-textarea" class="materialize-textarea" 
                                  [(ngModel)]="proposition.Description" name="proposition-description-{{i}}-textarea"></textarea>
                                  <label for="proposition-description-{{i}}-textarea">Description</label>
                                </div>
                                <a class="btn-floating waves-effect waves-light red" (click)="removeProposition(proposition)"><i class="material-icons">delete</i></a>
                              </div>
                            </div>
                          </li>
                        </ul>
                    </div>
                    <div class="card-action center-align">
                      <a class="btn-floating waves-effect waves-light" (click)="addEmptyProposition()"><i class="material-icons">add</i></a>
                    </div>
                  </div>
                </div>
              </div>
          </div>
        </div>
        <div class="card-action">
            <div class="progress " *ngIf="isLoading()">
                <div class="indeterminate left"></div>
            </div>
            <a class="waves-effect waves-light btn left grey" *ngIf="!isLoading()">
              Retour
            </a>
            <button class="waves-effect waves-light btn right" *ngIf="!isLoading()" type="submit">
              Publier
            </button>
        </div>
      </div>
    </div>
</form>
